
-- /nextjs_oem_frontend/app/account/provider/signup/page.tsx --
// app/account/provider/signup/page.tsx
'use client'

import React, { useEffect } from 'react'
import { useRouter } from 'next/navigation'

export default function ProviderSignupRedirect() {
  const router = useRouter()

  useEffect(() => {
    router.replace('/account/signup')
  }, [router])

  return (
    <div className="container mt-5 text-center">
      <p>Mengalihkan ke halaman signup‚Ä¶</p>
    </div>
  )
}


----------------------------------------


-- /nextjs_oem_frontend/app/account/provider/callback/page.tsx --
// app/account/provider/callback/page.tsx
'use client'

import React, { useEffect, useMemo, useState } from 'react'
import { useRouter, useSearchParams } from 'next/navigation'
import Link from 'next/link'
import { useAuth } from '../../../../auth/AuthContext'
import { getAuth, AuthResponse } from '../../../../lib/allauth'
import { pathForPendingFlow } from '../../../../auth/routing'
import { useRequest } from '../../../../lib/helpers/useRequest'
import { mutate } from 'swr'

export default function ProviderCallbackPage() {
  const router = useRouter()
  const searchParams = useSearchParams()
  const { flows, isAuthenticated } = useAuth()

  const [error, setError] = useState<string | null>(null)

  const { trigger: fetchAuth, loading } = useRequest(getAuth)

  const fallbackURL = useMemo(() => {
    if (isAuthenticated) return '/account'
    return pathForPendingFlow({ data: { flows } } as AuthResponse) || '/account/login'
  }, [isAuthenticated, flows])

  useEffect(() => {
    const errorParam = searchParams.get('error')
    if (errorParam) {
      setError(decodeURIComponent(errorParam))
      return
    }

    const finalizeLogin = async () => {
      const res = await fetchAuth()
      if (!res) return setError('Gagal mengambil data sesi dari server.')

      await mutate('/auth/session')

      const flow = res.data?.flows?.find(f => f.id === 'provider_signup' && f.is_pending)
      if (flow) {
        router.replace('/account/signup')
      } else {
        router.replace(fallbackURL)
      }
    }

    finalizeLogin()
  }, [searchParams, fetchAuth, fallbackURL, router])

  if (error) {
    return (
      <div className="container mt-5">
        <h1>Login Sosial Gagal</h1>
        <div className="alert alert-danger">{error}</div>
        <Link href={fallbackURL} className="btn btn-secondary">Kembali</Link>
      </div>
    )
  }

  return (
    <div className="container mt-5">
      <h1>Menyelesaikan login‚Ä¶</h1>
      <p>Sedang menghubungkan akun Anda. Harap tunggu sebentar.</p>
      {loading && <p><em>Memuat data sesi‚Ä¶</em></p>}
    </div>
  )
}


----------------------------------------


-- /nextjs_oem_frontend/app/admin/not-found.tsx --
import React from "react"
import Link from "next/link"

export default function AdminNotFound() {
  return (
    <div className="container py-5 text-center">
      <h1 className="h4 mb-3">Halaman Admin Tidak Ditemukan</h1>
      <p className="text-muted">Periksa kembali URL yang Anda akses.</p>
      <Link href="/admin" className="btn btn-outline-secondary mt-3">
        ‚Üê Kembali ke Dashboard Admin
      </Link>
    </div>
  )
}


----------------------------------------


-- /nextjs_oem_frontend/app/admin/metadata.ts --
// app/admin/metadata.ts
import type { Metadata } from "next"

export const adminMetadata: Metadata = {
  title: "Admin | OEM-X",
  description: "Halaman admin OEM-X.",
  robots: { index: false, follow: false }, // üö´ jangan diindeks Google
}

----------------------------------------


-- /nextjs_oem_frontend/app/admin/layout.tsx --
// src/app/admin/layout.tsx
import React from "react"
import { adminMetadata } from "./metadata"
import AdminClientWrapper from "./AdminClientWrapper"

export const metadata = adminMetadata

export default function AdminLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <div className="container py-4">
      <AdminClientWrapper>{children}</AdminClientWrapper>
    </div>
  )
}


----------------------------------------

